digraph clusterMainPackage {
	fontname = "Bitstream Vera Sans"
	fontsize = 8

	splines=line;

	node [
		fontname = "Bitstream Vera Sans"
		fontsize = 8
		shape = "record"
	]

	edge [
		fontname = "Bitstream Vera Sans"
		fontsize = 8
	]

	NetworkConnection [
		label = "{NetworkConnection|- socket : ZMQ.Socket\l|+ send(message: Message) : void\l}"
	]

	EnvironmentSettings [
		label = "{EnvironmentSettings||\l}"
	]

	subgraph clusterControllerPackage {
		label = "Package nl.tudelft.tbm.netlogo_hpc.controller"
		Controller [
			label = "{Controller||\l}"
		]

		DataController [
			label = "{DataController||\l}"
		]
	}

	subgraph clusterWorkerPackage {
		label = "Package nl.tudelft.tbm.netlogo_hpc.worker"

		Worker [
			label = "{Worker||\l}"
		]

		WorkerListener [
			label = "{WorkerListener||\l}"
		]

		BehaviorWorkspace [
			label = "{BehaviorWorkspace||\l}"
		]

	}

	subgraph clusterMessagePackage {
		label = "Package nl.tudelft.tbm.netlogo.hpc.messages"

		Message [
			label = "{Message||+ encode() : Array[Bytes]\l+ decode(data: Array[Object]): Message\l}"
		]

		MetricReportMessage [
			label = "{MetricReportMessage||+ encode() : Array[Bytes]\l+ decode(data: Array[Object]): Message\l}"
		]

		RunNumberRequestMessage [
			label = "{RunNumberRequestMessage||+ encode() : Array[Bytes]\l+ decode(data: Array[Object]): Message\l}"
		]

		RunNumberReplyMessage [
			label = "{RunNumberReplyMessage||+ encode() : Array[Bytes]\l+ decode(data: Array[Object]): Message\l}"
		]
	}

	Message -> NetworkConnection

	EnvironmentSettings -> Controller
	NetworkConnection -> Controller
	RunNumberRequestMessage -> Controller
	RunNumberReplyMessage -> Controller

	DataController -> Controller

	NetworkConnection -> DataController
	MetricReportMessage -> DataController

	EnvironmentSettings -> Worker
	NetworkConnection -> Worker
	RunNumberRequestMessage -> Worker
	RunNumberReplyMessage -> Worker
	WorkerListener -> Worker
	BehaviorWorkspace -> Worker

	MetricReportMessage -> WorkerListener

	WorkerListener -> BehaviorWorkspace

	edge [
		arrowhead = "empty"
	]
	// interface inheritance
	MetricReportMessage -> Message
	RunNumberRequestMessage -> Message
	RunNumberReplyMessage -> Message
}
